<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Stocks</title>

    <style>
        
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
    </style>
</head>
<body>
    <h1>Stocks</h1>

    <div class="Page">
        <form th:action="@{/stocks}" method="get">
            <label for="symbol">Symbol: </label>
            <input type="text" id="symbol" name="symbol" placeholder="Enter symbol">
            <button class="button" type="submit">Search</button>
        </form>

    <h2>Quote</h2>
    <p><strong>Current price:</strong> <span th:text="${quote.c}"></span>
    <strong>High price of the day:</strong> <span th:text="${quote.h}"></span>
    <strong>Low price of the day:</strong> <span th:text="${quote.l}"></span>
    <strong>Open price of the day:</strong> <span th:text="${quote.o}"></span></p>
    <p><strong>Previous close price:</strong> <span th:text="${quote.pc}"></span>
    <strong>Percent change:</strong> <span th:text="${quote.dp}"></span>
    <strong>Change:</strong> <span th:text="${quote.d}"></span></p>

    <h2>Recommendations (Number of Analysts recommending different strategies)</h2>
    <div th:each="recommendation, stat : ${recommendations}" th:if="${stat.count <= 2}">
        <p><strong>Period:</strong> <span th:text="${recommendation.period}"></span></p>
        <p><strong>Buy:</strong> <span th:text="${recommendation.buy}"></span>
        <strong>Hold:</strong> <span th:text="${recommendation.hold}"></span>
        <strong>Sell:</strong> <span th:text="${recommendation.sell}"></span></p>
        <p><strong>Strong Buy:</strong> <span th:text="${recommendation.strongBuy}"></span>
        <strong>Strong Sell:</strong> <span th:text="${recommendation.strongSell}"></span>
        <strong>Symbol:</strong> <span th:text="${recommendation.symbol}"></span></p>
    </div>

    <h2>News</h2>
    <div th:each="newsItem, stat : ${news}" th:if="${stat.count <= 2}">
        <p><h3><strong> <span th:text="${newsItem.headline}"></span></strong></h3></p>
        <p><strong>Source:</strong> <span th:text="${newsItem.source}"></span></p>
        <p><strong>Summary:</strong> <span th:text="${newsItem.summary}"></span></p>
        <p><strong><a th:href="${newsItem.url}" th:text="${newsItem.url}"></a></strong></p>
    </div>
</body>
</html>
